<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/5121a7d608.js" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpg" href="/images/PROCAS.png">
    <link rel="stylesheet" href="/public/css/actividad.css">
    <title>PROCAS</title>
</head>

<body>
    <header>
        <div class="logo">
            <img src="/images/PROCAS.png" alt="PROCAS">
        </div>
        <div class="usuario-admin">
            <i class="fas fa-user"></i> Usuario Administrador
            <p class="cerrar-sesion" id="cerrarSesionButton" onclick="confirmarCerrarSesion()">
                <i class="fa-solid fa-arrow-right"></i> Cerrar Sesión
            </p>
        </div>
    </header>
    <nav>
        <ul>
            <li><button onclick="redirectToDashboard()" class="dashboard-button">DASHBOARD</button></li>
            <li><button onclick="redirectToMaestroContratistas()" class="maestro-button">MAESTRO CONTRATISTA</button>
            </li>
            <li><button onclick="redirectToMatrizDeActividades()" class="matriz-button">MATRIZ DE ACTIVIDADES</button>
            </li>
        </ul>
    </nav>
    <div class="form-container">
        <h2>REGISTRO NUEVA ACTIVIDAD</h2>
        <form id="actividadForm" onsubmit="return validarFormulario()">
            <label for="category">Categoría (Requerido)</label>
            <select id="category" name="category">
                <option value="mantenimiento">Mantenimiento</option>
                <option value="servicio">Servicio</option>
                <option value="obra">Obra</option>
            </select>
            <label for="title">Titulo (Requerido)</label>
            <input type="text" id="title" name="title">
            <label for="description">Descripción de la Actividad</label>
            <textarea id="description" name="description"></textarea>
            <h3>REQUERIMIENTOS RELACIONADOS</h3>
            <button type="button" onclick="cancelar()">CANCELAR</button>
            <button type="submit">GUARDAR</button>
        </form>
    </div>

    <script>
        function confirmarCerrarSesion() {
            var confirmacion = confirm("¿Está seguro de cerrar sesión?");
            if (confirmacion) {
                window.location.href = "/login";
            }
        }

        function redirectToMaestroContratistas() {
            window.location.href = "maestro.html";
        }

        function redirectToMatrizDeActividades() {
            window.location.href = "matriz.html";
        }

        function redirectToDashboard() {
            window.location.href = "/dashboard";
        }

        function validarFormulario() {
            var category = document.getElementById("category").value;
            var title = document.getElementById("title").value;
            var description = document.getElementById("description").value;

            if (category.trim() === "" || title.trim() === "" || description.trim() === "") {
                alert("Por favor, complete todos los campos.");
                return false; // Evitar que el formulario se envíe
            }

            // Guardar los datos en el localStorage
            var actividad = {
                category: category,
                title: title,
                description: description
            };
            localStorage.setItem("nuevaActividad", JSON.stringify(actividad));

            // datos guardados en localStorage
            var datosGuardados = localStorage.getItem("nuevaActividad");
            console.log("Datos guardados en localStorage:", datosGuardados);

            window.location.href = "matrizBis.html";
            return false;
        }

        function cancelar() {
            alert("Operación cancelada");
        }
    </script>

</body>

</html>
