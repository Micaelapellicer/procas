<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/5121a7d608.js" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpg" href="/images/PROCAS.png">
    <link rel="stylesheet" href="/public/css/matrizBis.css">
    <title>PROCAS</title>
</head>

<body>

    <header>
        <div class="logo">
            <img src="/images/PROCAS.png" alt="PROCAS">
        </div>
        <div class="usuario-admin">
            <i class="fas fa-user"></i> Usuario Administrador
            <p class="cerrar-sesion" id="cerrarSesionButton" onclick="confirmarCerrarSesion()">
                <i class="fa-solid fa-arrow-right"></i> Cerrar Sesión
            </p>
        </div>
    </header>

    <nav>
        <ul>
            <li><button onclick="redirectToDashboard()" class="dashboard-button">DASHBOARD</button></li>

            <li><button onclick="redirectToMaestro()" class="maestro-button">MAESTRO CONTRATISTA</button></li>
            <li><button class="matriz-button">MATRIZ DE ACTIVIDADES</button></li>
        </ul>
    </nav>

    <div class="contenedor">
        <div class="barra">
            <div class="botones-barra">
                <button class="boton-barra">
                    <i class="fas fa-tasks"></i> Matriz de Actividades
                </button>
                <button class="boton-barra" id="btnRequeimientos" onclick="matriz()">
                    <i class="fas fa-list"></i> Listado de Requerimientos
                </button>
            </div>
        </div>
    </div>

    <button class="boton-agregar" id="btnAgregarActividad" onclick="agregarActividad()">
        <i class="fas fa-plus"></i> Agregar Actividad
    </button>

    <table class="tabla" id="tablaActividades">
        <thead>
            <tr>
                <th>Categoría</th>
                <th>Titulo Actividad</th>
                <th>Descripción Actividad</th>
                <th>Acción</th>
            </tr>
        </thead>
        <tbody class="tabla">

        </tbody>
    </table>

    <script>
        // Función para cargar las actividades desde localStorage y mostrarlas en la tabla
        function cargarDatosEnTabla() {
            var actividad = localStorage.getItem("nuevaActividad");
            if (actividad) {
                actividad = JSON.parse(actividad);
                var table = document.getElementById("tablaActividades");
                var row = table.insertRow(-1);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                cell1.innerHTML = actividad.category;
                cell2.innerHTML = actividad.title;
                cell3.innerHTML = actividad.description;
                cell4.innerHTML = '<button onclick="eliminarActividad(this)">Eliminar</button>';
            }
        }

        // función cargarDatosEnTabla cuando se cargue la página
        document.addEventListener('DOMContentLoaded', function () {
            cargarDatosEnTabla();
        });

        // función agregarActividad al hacer clic en el botón
        document.getElementById('btnAgregarActividad').addEventListener('click', function () {
            agregarActividad();
        });

        // Función para eliminar una actividad
        function eliminarActividad(button) {
            var row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }
    </script>

    <script>
        function confirmarCerrarSesion() {

            var confirmacion = confirm("¿Está seguro de cerrar sesión?");

            if (confirmacion) {
                window.location.href = "/login";
            }
        }

        function agregarActividad() {
            window.location.href = "actividad.html";
        }

        function matriz() {
            window.location.href = "matriz.html";
        }

        function redirectToMaestro() {
            window.location.href = "maestro.html";
        }

        function redirectToDashboard() {
            window.location.href = "dashboard.html";
        }
    </script>

</body>

</html>